<!--  -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="wiki.systemcrafters.net" src="https://plausible.io/js/plausible.js"></script><title> - System Crafters</title></head><body><div class="blog-header"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-8"><div class="blog-title">System Crafters</div></div><div class="col-sm col-md"><div class="blog-description text-sm-left text-md-right text-lg-right text-xl-right"></div></div></div></div></div><div class="blog-masthead"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-12"><nav class="nav"><a class="nav-link" href="/">Main Page</a> <a class="nav-link" href="/emacs">GNU Emacs</a> <a class="nav-link" href="/guix">GNU Guix</a><a class="nav-link" href="https://systemcrafters.net">System Crafters Home</a><form class="navbar-form navbar-right" role="search" action="https://duckduckgo.com/"><div class="form-group"><input type="text" name="q" class="form-control" placeholder="Search Wiki" style="overflow: hidden;margin-top: 3%;margin-bottom: 2%;"/><input type="hidden" name="sites" value="wiki.systemcrafters.net"/></div></form> </nav></div></div></div></div><div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title"></h1><p class="blog-post-meta"></p><div><h2><a id="insert-relative-file-path-in-current-buffer-using-counsel" class="anchor" href="#insert-relative-file-path-in-current-buffer-using-counsel">¶</a>Insert relative file path in current buffer using counsel</h2><h3><a id="" class="anchor" href="#">¶</a></h3><p>Useful while inserting figures path/name in <kbd>latex</kbd>. Similar to <kbd>C-x C-f</kbd>  in  <kbd>vim</kbd>.
</p>

<p>source: <a href="https://emacs.stackexchange.com/questions/39105/insert-file-path-via-counsel">stack answer</a>
</p>

<pre><code class="emacs-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">try-counsel-insert-file-path</span> ()
  <span class="org-doc">"Insert relative file path in current buffer using counsel in minibuffer"</span>
  (<span class="org-keyword">interactive</span>)
  (<span class="org-keyword">unless</span> (<span class="org-keyword">featurep</span> '<span class="org-constant">counsel</span>) (<span class="org-keyword">require</span> '<span class="org-constant">counsel</span>))
  (ivy-read <span class="org-string">"Insert filename: "</span> 'read-file-name-internal
            <span class="org-builtin">:matcher</span> #'counsel--find-file-matcher
            <span class="org-builtin">:action</span>
            (<span class="org-keyword">lambda</span> (x)
                 (insert (file-relative-name x)))))
</code></pre>



<h3><a id="" class="anchor" href="#">¶</a></h3><p>Recommended keybinding and counsel setting
</p>

<pre><code class="emacs-lisp">(<span class="org-keyword">use-package</span> <span class="org-constant">general</span>
  <span class="org-builtin">:config</span>
  (general-evil-setup t)

  (general-create-definer try/ctrl-c-keys
    <span class="org-builtin">:prefix</span> <span class="org-string">"C-c"</span>))

  (try/ctrl-c-keys
    <span class="org-string">"i"</span>   '(try-counsel-insert-file-path <span class="org-builtin">:which-key</span> <span class="org-string">"insert relative filepath"</span>)
  )
</code></pre>

<pre><code class="emacs-lisp">(<span class="org-keyword">use-package</span> <span class="org-constant">counsel</span>
  <span class="org-builtin">:diminish</span> ivy-mode
  <span class="org-builtin">:diminish</span> counsel-mode
  <span class="org-builtin">:bind</span> ((<span class="org-string">"C-s"</span> . swiper)
       <span class="org-builtin">:map</span> ivy-minibuffer-map
       (<span class="org-string">"TAB"</span> . ivy-alt-done))
  <span class="org-builtin">:init</span>
  (ivy-mode 1)
  (counsel-mode 1)
  <span class="org-builtin">:config</span>
  (<span class="org-keyword">setq</span> ivy-use-virtual-buffers t)
  (<span class="org-keyword">setq</span> enable-recursive-minibuffers t))
</code></pre>
</div></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right"><p>Made with Emacs 27.2 (Org mode 9.4.4)</p><p><a href="https://systemcrafters.net/privacy-policy/">Privacy Policy</a></p></div></div></div></footer><script src="/js/bootstrap.bundle.min.js"/></body></html>
